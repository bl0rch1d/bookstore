%main.container
  %h1.general-title-margin Ð¡atalog
  .hidden-xs.clearfix
    .dropdowns.pull-right
      .dropdown.width-240
        %a.dropdown-toggle.lead.small{href: "#", 'data-toggle': "dropdown", role: "button", 'aria-haspopup': "true", 'aria-expanded': "false"}
          = params[:sort_by] || 'Newest first'
          %i.fa.fa-angle-down.dropdown-icon.pull-right
        %ul.dropdown-menu
          %li
            = link_to 'Newest first', category_books_path(params[:category_id], sort_by: 'newest')
          %li
            = link_to 'Popular first', category_books_path(params[:category_id], sort_by: 'popular')
          %li
            = link_to 'Price: Low to high', category_books_path(params[:category_id], sort_by: 'low_price')
          %li
            = link_to 'Price: High to low', category_books_path(params[:category_id], sort_by: 'high_price')
          %li
            = link_to 'Title: A - Z', category_books_path(params[:category_id], sort_by: 'title_ascending')
          %li
            = link_to 'Title: Z - A', category_books_path(params[:category_id], sort_by: 'title_descending')


    %ul.list-inline.pt-10.mb-25.mr-240
      %li.mr-35
        .filter-link
          = link_to 'All', category_books_path('all'), class: "collapse-link"
          %span.badge.general-badge= Book.count
      
      - Category.all.each do |category|
        %li.mr-35
          .filter-link
            = link_to category.title, category_books_path(category), class: "collapse-link"
            %span.badge.general-badge= category.books.count

    -# %p.lead.small.mb-10 Sort by
    -# .dropdown
    -#   %a.dropdown-toggle.lead.small{href: "#", 'data-toggle': "dropdown", role: "button", 'aria-haspopup': "true", 'aria-expanded': "false"}
    -#     = params[:sort_by] || 'Newest first'
    -#     %i.fa.fa-angle-down.dropdown-icon.pull-right
    -#   %ul.dropdown-menu
    -#     %li
    -#       = link_to 'Newest first', category_books_path(params[:category_id], sort_by: 'newest')
    -#     %li
    -#       = link_to 'Popular first', category_books_path(params[:category_id], sort_by: 'popular')
    -#     %li
    -#       = link_to 'Price: Low to high', category_books_path(params[:category_id], sort_by: 'low_price')
    -#     %li
    -#       = link_to 'Price: High to low', category_books_path(params[:category_id], sort_by: 'high_price')
    -#     %li
    -#       = link_to 'Title: A - Z', category_books_path(params[:category_id], sort_by: 'title_ascending')
    -#     %li
    -#       = link_to 'Title: Z - A', category_books_path(params[:category_id], sort_by: 'title_descending')

  .dropdowns.mb-25.visible-xs
    %p.lead.small.mb-10 Filter by category
    .dropdown
      %a.dropdown-toggle.lead.small{href: "#", 'data-toggle': "dropdown", role: "button", 'aria-haspopup': "true", 'aria-expanded': "false"}
        = params[:sort_by] || 'Newest first'
        %i.fa.fa-angle-down.dropdown-icon.pull-right
      %ul.dropdown-menu
        %li
          = link_to 'Newest first', category_books_path(params[:category_id], sort_by: 'newest')
        %li
          = link_to 'Popular first', category_books_path(params[:category_id], sort_by: 'popular')
        %li
          = link_to 'Price: Low to high', category_books_path(params[:category_id], sort_by: 'low_price')
        %li
          = link_to 'Price: High to low', category_books_path(params[:category_id], sort_by: 'high_price')
        %li
          = link_to 'Title: A - Z', category_books_path(params[:category_id], sort_by: 'title_ascending')
        %li
          = link_to 'Title: Z - A', category_books_path(params[:category_id], sort_by: 'title_descending')
  


  .mb-120
    .row
      - @books.each do |book|
        .col-xs-6.col-sm-3
          .general-thumb-wrap
            .thumbnail.general-thumbnail
              %img
                = image_tag(book.decorate.cover, class: 'img-shadow general-thumbnail-img')
              .thumb-hover
                .general-thumb-link-wrap
                  = link_to book_path(book), class: "thumb-hover-link" do
                    %i.fa.fa-eye.thumb-icon{'aria-hidden': "true"}
                  %a.thumb-hover-link
                    %i.fa.fa-shopping-cart.thumb-icon
          .general-thumb-info
            %p.title= book.title
            %p.font-16.in-gold-500= book.decorate.price_in_currency
            %span.divider-sm
            %p.lead.small.catalog-authors= book.decorate.format_authors
  
    .text-center
      = raw pagy_bootstrap_nav(@pagy)
